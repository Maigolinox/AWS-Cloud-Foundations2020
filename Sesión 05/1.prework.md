# Prework Sesi√≥n 3

## Introducci√≥n
Los datos son el elemento m√°s importante para cualquier organizaci√≥n. La forma en que los datos son guardados da forma al como se da acceso, uso y seguridad a ellos.
AWS ofrece m√∫ltiples opciones para el guardado de datos desde discos duros hasta bases de datos, cada una con caracter√≠sticas √∫nicas que destacan en distintos casos de uso, ej: se vuelve poco fiable y √≥ptimo guardar archivos en una base de datos para tal uso hay servicios dise√±ados para guardar archivos.   

### 1. Objetivo üéØ
- Comprender los distintos tipos de storage que ofrece AWS.
- Conocer los usos m√°s comunes para cada tipo de storage.

### 2. Instrucciones üìã
- Leer con atenci√≥n lejos de distractores atendiendo a enlaces externos y recursos.

### 3. Desarrollo üìë

# Amazon Simple Storage Service (S3)

El servicio para guardado de datos pr√°cticamente "infinito", de simple no tiene nada, es un servicio muy interesante para guardar gigas y gigas de archivos (tambi√©n conocidos como objetos) sin necesidad de tener conectado este storage a ning√∫n sistema operativo, simplemente con una conexi√≥n http se puede hacer uso de √©l. Tiene un 99.999999999% de durabilidad de archivos por a√±o, lo que quiere decir que si se almacenan 10000 objetos se espera en una p√©rdida de un objeto cada 10,000,000 de a√±os, aunque esto depender√° mucho de como se configuran los buckets. 
Los buckets son la unidad l√≥gica m√≠nima donde se guarda informaci√≥n, antes de de poder guardar cualquier tipo de archivo se debe crear un bucket, se puede  visualizar como una carpeta con configuraciones bien definidas para cifrado, niveles de servicio, pol√≠ticas de acceso, replicaci√≥n, manejo del ciclo de vida de los archivos, esta √∫ltima muy interesante. Es posible definir el momento en que los archivos deben moverse a otros niveles de servicio de S3 en pro de reducir costos, ej: mueve todos los archivos XML de facturas del bucket a un nivel mas barato si en 90 d√≠as no se usan. 
S3 proporciona mecanismo para brindar almacenamiento en distintos niveles de servicio, se pueden guardar archivos a precios m√°s baratos aunque no ofrecer√≠a acceso de manera inmediata si no que puede tardar el acceso a los archivos desde varios minutos hasta varias horas, tambi√©n se puede escoger una configuraci√≥n especial para guardar archivos sin replicaci√≥n entre zonas de disponibilidad, por defecto S3 replica la informaci√≥n a lo largo de varias zonas de disponibilidad, de poner los archivos en esta configuraci√≥n se pueden perder si es que AWS perdiera por alg√∫n motivo la zona de disponibilidad.

A continuaci√≥n se ve el detalle de los distintos niveles de servicio:

|                          Storage | Precio                   | Desempe√±o y latencia                        | Disponibilidad | Durabilidad   |
|---------------------------------:|--------------------------|---------------------------------------------|----------------|---------------|
| S3 Est√°ndar                      | 0,023 USD por GB / Mes   | Baja latencia y alto nivel de procesamiento | 99,99%         | 99.999999999% |
| S3 Intelligent-Tiering           | 0.023 USD por GB / mes   | Mismo de S3 Est√°ndard                       | 99.99%         | 99.999999999% |
| Est√°ndar ‚Äì Acceso poco frecuente | 0.0125 USD por GB / mes  | Mismo de S3 Est√°ndard                       | 99.9 %         | 99.999999999% |
| S3 √önica zona                    | 0.01 USD por GB / mes    | Mismo de S3 Est√°ndard                       | 99.5%          | 99.999999999% |
| S3 Glacier                       | 0,004 USD por GB / mes   | Minutos u horas                             | 99.99%         | 99.999999999% |
| Glacier Deep Archive             | 0.00099 USD por GB / Mes | Horas                                       | 99.99%         | 99.999999999% |
| Reduced Redundancy Storage       | 0.024 USD por GB / Mes   | Mismo de S3 Est√°ndard                       | 99.99%         | 99.99%        |

Los conceptos clave de la tabla anterior son durabilidad y disponibilidad, la primera refiere a la probabilidad de perder un objeto cada a√±o, la segunda es el porcentaje de tiempo que un objeto ser√° accesible en un a√±o.

Ejemplos de buckets.
![bucket](buckets.png)

Transici√≥n a los distintos almacenamientos:
![almacenamientos](ciclo-de-vida.png)


# Hosting en Amazon S3
AWS S3 permite hospedar sitios web est√°ticos sin necesidad de instalar un servidor como Apache o Nginx para tal. 
La desventaja es que si se quiere usar un dominio propio (AWS brinda un dominio espec√≠fico al habilitar un bucket como servidor de archivos) habr√° que usar el servicio Cloud Front, y si se requiere brindar soporte para el protocolo https se tiene que hacer en conjunto con Cloud Front y AWS Certificate Manager, el uso de Cloud Front incurre en costos extras a los de S3, hay que tomar en cuenta tambi√©n que los buckets quedan expuestos al p√∫blico por lo que se recomienda que los buckets configurados como web servers no tengan datos sensibles, los datos sensibles deber√≠an manejarse en buckets totalmente privados. La gran ventaja de usar S3 como webserver es que no hay necesidad de preocuparse por la redundancia, disponibilidad, escalado, balanceo de carga, en general se puede ver como un PaaS para el hosting de sitios.

# Glacier Deep Archive
Es un tipo especial de storage de objetos muy econ√≥mico, el precio se logra manteniendo los datos en una capa donde al requerir los objetos estos pueden tardar horas en estar listos antes de poderlos descargar. Hay que tener en cuenta la criticidad de la informaci√≥n y los RTO y RPO a la hora de seleccionar este tipo de storage, si la organizaci√≥n requiere tiempos de recuperaci√≥n (RTO) del orden de algunos minutos Glacier no es la opci√≥n para estos casos.

# Elastic Block Store
AWS Elastic Block Storage (EBS) es la soluci√≥n de almacenamiento a nivel de bloque de Amazon usado con el servicio en la nube EC2 para almacenar datos persistentes. Significa que los datos se mantienen en los servidores AWS EBS incluso cuando las instancias de EC2 se apagan o terminan. EBS ofrece la misma alta disponibilidad y baja latencia rendimiento dentro de la zona de disponibilidad seleccionada permitiendo a los usuarios la capacidad de almacenamiento en la escala modelo de precios bajos basado en suscripci√≥n. Los volumenes de datos se pueden unir de forma din√°mica, separados y escalados con cualquier instancia de EC2, al igual que una unidad de almacenamiento de f√≠sica en un servidor tradicional. Es un servicio en la nube altamente fiable, EBS garantiza la disponibilidad del 99,999%.
EBS presenta diferentes escalas de costos,  brinda General Purpose SSD, Provisioned IOPS SSD para cargas de trabajo demandantes, Throughput Optimized HDD para storage de bajo costo que no necesita velocidades altas  y Cold HDD si se requiere bajar los costos lo m√°s posible.
EBS cuenta con Snapshots o instant√°neas, funci√≥n que permite el almacenamiento de vol√∫menes de datos de forma incremental, mientras que solo se cobra por el cambio en el volumen de datos. Por ejemplo, si se agregaron 5 GB de datos a un bloque de almacenamiento de 100 GB existente con la instant√°nea, AWS solo cobrar√° por los 5 GB adicionales de datos. 
Las instant√°neas se pueden expandir, replicar, mover, compartir, copiar, modificar, administrar y organizar dentro y entre las zonas de disponibilidad de AWS utilizando Amazon Data Lifecycle Manager y la funci√≥n de etiquetas. Todas las instant√°neas de EBS se almacenan en AWS S3 lo que garantiza hasta 99.999999999% de durabilidad. Las instant√°neas no se almacenan como objetos accesibles para el usuario sino se deben acceder a trav√©s de la API de EBS. Las instant√°neas se almacenan detr√°s de las im√°genes de m√°quina de Amazon (AMI), lo que proporciona toda la informaci√≥n necesaria para recuperar datos y lanzar instancias EC2 en la nube.
Las instant√°neas son  clave para los planes de continuidad de negocio para aplicaciones y servicios de misi√≥n cr√≠tica. Los administradores pueden definir los objetivos de tiempo de recuperaci√≥n (RTO) y objetivos de punto de recuperaci√≥n (RPO)  gestionando las instant√°neas y servidores EC2 para cumplir con esos objetivos. Adem√°s de los objetivos de copia de seguridad de datos y recuperaci√≥n de desastres, los administradores tambi√©n utilizan instant√°neas de EBS para replica de ambientes de pruebas y producci√≥n, de producci√≥n se toma una instant√°nea, se renombra, se agrega a una nueva instancia EC2, la instancia se configura con sus pol√≠tica propias de networking y se tiene listo un servidor para desarrollo en minutos.


# Elastic File System
 Amazon EFS  genera la posibilidad d de contar con un almacenamiento de alto rendimiento no conectado directamente al sistema operativo como es el caso de EBS con la diferencia que accesa por medio del protocolo de red NFS , por si mismo NFS da la posibilidad de conectarse a un mismo volumen EFS desde distintas instancias EC2 (en una escala de cientos o miles de ellas), EBS solo puede ser accedido desde la instancia a la que esta asociada. 
 EFS escala sin problemas hasta capacidades del orden de PetaBytes, el storage va creciendo a la par que se van agregando datos y un punto interesante es que va reduciendo su capacidad a  medida que se eliminan datos.
 EFS se integra con IAM para ofrecer una soluci√≥n apegada a la seguridad empresarial, es posible configurar pol√≠ticas de IAM que limiten los permisos con los que una instancia se conecta o forzarlos a conectarse solo si se cumplen condiciones como el cifrado, inclusive es posible administrar el acceso a un volumen EFS desde otras cuentas de AWS. 
 AWS Key Management se integra con EFS para brindar soporte a vol√∫menes cifrados aunque hay que ser cuidadosos con la factura final, Key management cobra por request.
 Es posible establecer tambi√©n un esquema h√≠brido entre las instalaciones e infraestructura local y EFS conectando a servidores locales un volumen EFS por medio de una AWS VPN. No solo se puede acceder a un volumen EFS desde instancias EC2, tambi√©n se puede hacer desde AWS Lambdas, Elastic Container Services, Elastic Kubernetes Service y AWS SageMaker. 
 Sistemas de storage avanzados de la marca NetApp tienen la inteligencia necesaria para mover informaci√≥n poco usada a discos duros m√°s lentos (y m√°s baratos), esta caracter√≠stica tambi√©n la comparte EFS, ahorrando un poco en costos dependiendo de la cantidad de informaci√≥n que maneje el volumen, la decisi√≥n se hace por medio de una barrera de tiempo.
 Al generar un volumen se puede especificar a partir de cuantos d√≠as los datos que no son accesados se deben mover a una "capa" de EFS mas econ√≥mica, tambi√©n se puede definir la VPC donde se conectar√° el volumen y sin dejar pasar el control de acceso por medio de grupos de seguridad, para complementar la seguridad del volumen es posible definir pol√≠ticas de cifrado de tr√°nsito, acceso de solo lectura y restricci√≥n de acceso a la ra√≠z del volumen.
 La verdad es que es muy r√°pido generar un volumen EFS, despu√©s de 10 minutos de lectura y algunos clicks esta disponible un volumen listo para ser usado. 
 ![efs](efs.png)


# Data Transfer con AWS Snowball
Snowball es el servicio de AWS dise√±ado para la transferencia de altos vol√∫menes de datos desde y hacia los centros de datos de AWS.
Snowball son dispositivos f√≠sicos de unos 21 kilogramos de peso, de 50x30x50 cm con capacidad de almacenamiento de 42 TB y 72TB, con conexiones 10 Gbps para transferencia de datos dise√±ado para llevar datos desde el propio centro de datos hacia AWS S3 y de regreso en el caso de tener tantos datos que ser√≠a inviable la transferencia por Internet en periodos cortos de tiempo.
Los dispositivos son resistentes a la extracci√≥n no autorizada de informaci√≥n (tramper), protegidos por cifrado 256 bits con AWS KMS, f√≠sicamente son resistentes a los tratos rudos, el propio dispositivo es el contenedor de env√≠o.
![https://docs.aws.amazon.com/snowball/latest/developer-guide/images/Snowball-Edge-Image.png](https://docs.aws.amazon.com/snowball/latest/developer-guide/images/Snowball-Edge-Image.png)

En cuanto a precio, ronda los 300 USD por 10 d√≠as de uso.

# Aurora
Es un motor no opensource de base de datos relacional compatible con MySQL y Postgres con capacidad de autoescalado y almacenamientos de hasta 64 TB.
Es compatible con snapshots para backups, cifrado con llaves KMS, es compatible para operar con costo por instancia, el tama√±o de instancia es decidido al crear la base de datos, aunque tambi√©n ofrece un modelo de precio basado en `serverless` especialmente atractivo en aplicaciones de uso poco frecuente donde la aplicaci√≥n es accesada pocos minutos varias veces en un d√≠a,  tambi√©n es posible tambi√©n adquirir un contrato con plazo de 1 o 3 a√±os consiguiendo un mejor precio por instancia por hora.
Aurora brinda un rendimiento aproximado 5X en bases de datos MySQL tradicionales y 3X al hablar de Postgres, esto se logra con su motor propietario optimizado para ejecutarse sobre una configuraci√≥n de hardware espec√≠fica de SSD.
Si es posible modificar el tama√±o de la instancia de base de datos, la memoria y el n√∫mero de CPUs, sin embargo no es en `caliente`, se tiene que entrar en un periodo de mantenimiento (la instancia deja de estar disponible) hasta que los cambios se realicen, es el an√°logo a reiniciar la instancia para que se ajuste a los nuevos valores.

# Amazon Relational Database Service (RDS)

Servicio PaaS de base de datos relacionales. Soporta motores MySQL, MariaDB, Oracle, SQL Server y Postgres.
Al ser un PaaS no hay mucho que administrar, incluso si se desea replicaci√≥n en m√∫ltiples zonas de disponibilidad el PaaS lo hace pr√°cticamente transparente, incluso ante falla el cambio de base de datos a otra zona de disponibilidad es transparente a la aplicaci√≥n. 
Las copias de seguridad est√°n cubiertas con la tecnolog√≠a de snapshots, se puede establecer la frecuencia (RPO) en que se tomar√°n los snapshots al igual que el tiempo que se mantendr√°n disponibles esas copias de seguridad para restaurar ya que se debe tomar en cuenta que estas copias de seguridad ocupan espacio en disco duro y el espacio tiene un costo monetario.
Un punto base de RDS es la configuraci√≥n de VPC para tener una instancia funcionando. Al generar una nueva instancia ser√° necesario generar un _grupo de subred_, no es mas que una figura que conjunta subredes de VPC de diferentes zonas de disponibilidad para conectar la instancia RDS a la red, dicho de otro modo, se requerir√°n subredes en m√≠nimo dos zonas de disponibilidad distintas para provisionar una instancia RDS, es de especial importancia tomar esto en cuenta a la hora de dise√±ar la arquitectura de red VPC.
La seguridad de datos en reposo cambien esta garantizada al ser un servicio compatible con KMS. La seguridad de autorizaci√≥n y autenticaci√≥n tambi√©n garantizada, hay compatibilidad con IAM y CloudTrial.
El servicio RDS da la flexibilidad para escalar la base de datos a una instancia con mayor memoria o CPU de manera flexible, solo hay que tomar en cuenta que para modificar el tama√±o de la instancia se debe pasar por un periodo de reinicio de la instancia lo que dejar√° inaccesible la base de datos a las aplicaciones que se conectan a ella por unos 15 minutos.

# Amazon DynamoDB
DynamoDB es un tipo de base de datos NoSQL, en espec√≠fico una base de datos  documental (soporta formato JSON).
El esquema de precios de DynamoDB es dif√≠cil de calcular, en resumen el precio es calculado  por el almacenamiento de datos, escrituras y lecturas de informaci√≥n.

Unidades de lectura: Una unidad de lectura o escritura (RCU y WCU) representan las lecturas y escrituras por segundo que una tabla de DynamoDB puede proveer.

Lectura consistencia final: Es posible que la respuesta no refleje los resultados de una operaci√≥n de escritura completada recientemente. La respuesta puede incluir algunos datos obsoletos. Si repite la solicitud de lectura despu√©s de un corto per√≠odo de tiempo, la respuesta debe devolver los datos m√°s recientes.
Requiere 1 RCU para datos de hasta 4KB

Lectura alta mente coherente: Cuando solicita una lectura altamente  coherente, DynamoDB devuelve una respuesta con los datos m√°s actualizados, reflejando las actualizaciones de todas las operaciones de escritura anteriores que se realizaron correctamente.
Requiere 2 RCU para datos de hasta 4KB

Lecturas transaccionales:
Con ellas se garantizan los principios [ACID](https://www.essentialsql.com/sql-acid-database-properties-explained/), con es posible generar flujos complejos de que incluyan crear, actualizar o borrar elementos en una √∫nica operaci√≥n llamada transacci√≥n. Estas lecturas consumen 2 RCU.

Escritura:  Cuenta con escrituras est√°ndar y consistencia final, las escrituras est√°ndar requieren una WCU hasta elementos de 1KB mientras las transaccionales consumen 2  WCU por datos de hasta 1 KB. 

Precios bajo demanda aplican bajo los conceptos WCU y RCU,  las solicitudes de lectura cuestan 1.25 USD por mill√≥n de solicitudes y 0.25 USD por mill√≥n de solicitudes de escritura.

El almacenamiento o storage representan un costo de 0.25 USD por GB al mes. A los cargos anteriores se deben sumar costos de copias de seguridad y restablecimientos de los datos.
En el caso de tablas globales (m√∫ltiples regiones) las solicitudes de escritura tienen costo as√≠ como la transferencia de datos por ser entre regiones.
En caso de requerir aceleraci√≥n por medio de cache (Dynamo DAX) dependiendo del tama√±o de la instancia se aplican costos extra. 
Si se requieren generar acciones ante eventos en tablas espec√≠ficas habr√° de habilitarse DynamoDB Streams para poder conectar con AWS Lambda y ejecutar la tarea requerida, ambos servicios tienen costos adicionales.

A continuaci√≥n se muestra un registro u elemento en una tabla de Dynamo DB.
![registro.png](registro.png)



# Amazon Elasticache 
Dentro de la gran familia de las bases de datos NoSQL se encuentran Redis y Memcached.
Redis es muy bueno para resolver cierto tipo de problemas que representan tradicionalmente un cuello de botella en bases de datos relacionales o sistemas de archivos.
Por ejemplo, el carrito de compra de una web sin problema puede ser guardado ya sea en sesi√≥n o directamente en la base de datos, ambos enfoques se pueden mejorar bastante en rendimiento al usuario final si en lugar de guardar la informaci√≥n del carrito de compra en disco duro se guarda en memoria RAM por medio de Redis, al estar en memoria RAM la transacci√≥n de agregar o eliminar productos del carrito aumentar√° de manera notable. Lo mismo se puede hacer con Memcached, pero si es requerimiento mantener los carritos de compra en disco persistente (se desea tener esta informaci√≥n en el data lake para luego llevarla a un data warehouse) Redis es la opci√≥n, tiene la opci√≥n de persistir los datos que maneja en RAM en un periodo configurable, Memcached no cuenta con esto.  
Las principales diferencias son:

| Caracter√≠stica    | Redis                                                | Memcached                                             |
|-------------------|------------------------------------------------------|-------------------------------------------------------|
| Tipos de datos    | string,list,set,hash,bit,geo espacial principalmente | string                                                |
| Manejo de memoria | Puede guardar datos en disco si la RAM se ha agotado | Soporta guardado en memoria con la extensi√≥n extstore |
| L√≠mite de datos   | Puede manejar strings de hasta 512 MB                | solo 1MB                                              |
| Replicaci√≥n       | Soportada con herramientas externas                  | No soportada                                          |
| Esquema pub/sub   | Soportado                                            | No soportado                                          |
| Modo cluster      | Soporte nativo                                       | Soporte parcial                                       |



AWS Elasticache es el servicio para implementar nodos Redis o Memcached completamente administrado con capacidad de escalado de 256 nodos y hasta 170 TB de capacidad para almacenamiento de RAM. Es posible implementarlo dentro de una VPC o fuera de ella, en ambos casos se tienen que configurar grupos de seguridad para especificar quien si puede acceder al cluster de nodos y quien no. En el caso de seleccionar Redis como motor se puede optar por un soporte de para m√∫ltiples zonas de disponibilidad ofreciendo conmutaci√≥n por error de nodos autom√°tica. 
Importante a tomar en cuenta en Elasticache, Memcached no es apto para manejar datos de tarjetas de cr√©dito al no cumplir con la certificaci√≥n PCI DSS, Redis si la cumple. Memcached no tiene la capacidad para realizar un backup y restauraci√≥n de datos, Redis si tiene esa capacidad.

# Amazon Redshift
M√∫ltiples aplicaciones generando datos, sistemas ERP, puntos de venta, chats de atenci√≥n al cliente, grabaciones de audio y v√≠deo, emails, son muchos los datos y la diversidad de datos generados por una organizaci√≥n. Los datos desde cada generador tienen formatos distintos, binarios, json, txt, pst en email, reportes de Excel, etc, sin problema pueden ser guardados en un bucket S3 a modo de `Datalake`, un lugar donde es viable guardar tanto datos estructurados como no estructurados. 
Pero la informaci√≥n as√≠ no sirve de mucho, para transformar esos datos en informaci√≥n es necesario darles una estructura, la informaci√≥n debe responder a las preguntas ¬ødonde?, ¬øque?, ¬øquien?, ¬øcuando?, en ventas importa por lo menos saber quien vendi√≥ que cosa en que fecha y la localizaci√≥n de la venta por ejemplo. Para estas tareas es especialmente valioso contar con un  Data Warehouse como respaldo a las tareas de Business Intelligence, anal√≠tica y reportes de la organizaci√≥n para tomar decisiones en la operaci√≥n diaria y an√°lisis de datos hist√≥ricos.

![datawarehouse.png](datawarehouse.png)
Los Data Warehouse deben tener la capacidad de manejar grandes vol√∫menes de informaci√≥n a la hora de extraer datos hacia un reporte, no es atractivo tener reportes que tarden minutos o hasta horas en generarse, 

** por lo cual se demandan recursos que puedan manejar la demanda.

AWS Redshift es el Data Warehouse de Amazon, es un entorno PaaS con lo que en unos cuantos clicks se tendr√° un cluster listo para ingestar datos y procesarlos siempre con la flexibilidad de escalamiento desde unos pocos GB hasta PB de datos, la arquitectura de Redshift permite extraer informaci√≥n de los datos en poco tiempo a√∫n trabajando sobre GB de datos y miles de consultas simult√°neas. Ofrece un esquema de precios flexible al escoger el tama√±o de RAM y CPU del cluster, facilita las copias de seguridad, es altamente tolerante a errores, se integra bien con el lenguaje de consultas SQL, puede trabajar incluso con tipos de datos espaciales especialmente importante en aplicaciones de entrega de productos donde hacer c√°lculos con referencias geogr√°ficas es importante. 
Se integra con otros servicios de AWS como DynamoDB o S3 para ingesta de datos, tiene capacidad para cifrar los datos en tr√°nsito y reposo con SSL y AES-256, el monitoreo esta cubierto con la integraci√≥n a CloudTrail registrando las consultas hechas, quien las hizo, los cambios realizados y los intentos de conexi√≥n.



# AWS Storage Gateway
Es un servicio que permite conectar aplicaciones on premise con storage basado en la nube.
Soporta conexi√≥n con tres tipos de storage, File gateway (almac√©n en S3) compatible con el protocolo NFS y SMB integrando con IAM, KMS para cifrado, CloudWatch para monitoreo , Volume gateway (almac√©n en EBS) y Tape gateway (Almac√©n en S3 Glacier).
El servicio puede ser hosteado en una maquina virtual on premise en hypervisores ESX VMWare, HyperV o lanzar una instancia EC2.

Un ejemplo es el uso de la soluci√≥n de respaldos Backup Exec de Symantec. Es posible provisionar un nodo de storage Gateway de tipo Tape y conectar Backup Exec para guardar los respaldos directamente en S3.
![backupexec.png](backupexec.png)

Otro ejemplo:
Se tienen dos oficinas cada una en diferentes ciudades, montando una instancia de AWS Sotrage Gateway de tipo File en cada oficina con acceso a un bucket espec√≠fico de S3 ambas localizaciones tendr√°n acceso a los archivos del bucket de forma f√°cil en sus sistemas operativos, en el caso de Widows se refleja como una unidad de red montada.
![Montando-carpetas-compartidas.png](Montando-carpetas-compartidas.png)

![unidad virtual.png](unidad virtual.png)




# AWS DocumentDB
Las bases de datos de documentos o documentales se centran en m√©todos de almacenamiento y acceso optimizados para documentos en lugar de filas o registros en una base de datos relacional. La forma de modelar   datos es un conjunto de colecciones de documentos que contienen colecciones de valores clave. En un almac√©n de documentos, los valores pueden ser otros documentos o listas anidadas y  valores escalares. Los nombres de los atributos no est√°n predefinidos en un esquema global, sino que se definen din√°micamente para cada documento en tiempo de ejecuci√≥n. A diferencia de las bases de datos relacionales, se autoriza una amplia gama de valores. 
![Document-db.png](Document-db.png)


| RDBSM          | Mongo DB        |
|----------------|-----------------|
| Base de datos  | Base de datos   |
| Tabla          | Colecci√≥n       |
| Registro/Tupla | JSON            |
| Columnas       | Campos del JSON |


AWS DocumentDB es una base de datos especializada en el guardado de informaci√≥n en formato JSON. Es compatible con la API MongoDB 3.6, en principio bastar√≠a con modificar la cadena de conexi√≥n de la aplicaci√≥n para migrar a AWS DocumentDB.
Es un servicio PaaS, no hay necesidad de preocuparse por administrar provisionamiento de hardware, red, parches de seguridad, configuraci√≥n o instalaci√≥n, incluso los respaldos est√°n cubiertos con capacidad para respaldar directamente en S3.
En cuanto a precio, DocumentDB se divide en cuatro dimensiones: costo por instancia, costo por E/S de datos, espacio de almacenamiento y respaldos. Un estimado en la AWS Pricing Calculator da el [siguiente resultado](https://calculator.aws/#/estimate?id=a8d70de522d91d5266c310c057038c7dcdde557c).




# AWS Keyspaces

AWS  Keyspaces Amazon permite tener cargas de trabajo de base de datos Cassandra en la nube, no hay servidores para gestionar; no hay necesidad de provisi√≥n, configuraci√≥n u operaci√≥n por ser un servicio PaaS; no hay necesidad de a√±adir o eliminar manualmente  nodos ni necesidad de balancear carga entre nodos. Tradicionalmente los clusters Cassandra demandan alto grado de especializaci√≥n, la configuraci√≥n y mantenimiento son muy demandantes para los administradores.
El servicio cobra por la cantidad de lecturas y escrituras hechas, por el almacenamiento en GB requerido por los datos y por la transferencia de datos en la red ya sea de entrada y salida desde y hacia otros servicios de AWS en diferentes regiones. 
Los respaldos tambi√©n incurren en costos extra al requerir espacio de storage para almacenarlos.

# AWS Neptune
Las bases de datos relacionales modelan bien datos que no tienen alta tasa de relaci√≥n entre ellos, para modelar datos con mucha relaciones es posible utilizar bases de datos orientadas a grafos.
Las bases orientadas a grafos centran el guardado de informaci√≥n en las relaciones entre entidades.
![graph](https://upload.wikimedia.org/wikipedia/commons/5/53/GraphDatabase_PropertyGraph.svg)
AWS ofrece Amazon Neptune como un PaaS (no hay necesidad de preocuparse por hardware, parches, provisionamiento, configuraci√≥n o backups) con soporte Gremlin de Apache TinkerPop como el lenguaje de consulta SPARQL del formato de datos [RDF](https://skos.um.es/TR/rdf-sparql-query/).
Neptune ofrece disponibilidad de 99.99%, lo logra replicando la base de datos en tres zonas de disponibilidad totalmente transparente, en caso de fallo de una zona de disponibilidad el cambio a otra zona de disponibilidad tarda unos 30 segundos en realizarse sin necesidad de intervenci√≥n del administrador. Soporta tasas de hasta 100 000 queries por segundo con capacidad de almacenar  64 TB  de informaci√≥n. Se integra con VPC para el networking y con AWS KSM para el cifrado de la informaci√≥n.
Despu√©s de llenar un formulario en AWS Console es posible tener funcionando una instancia de base de datos de Neptune lista para operar.

![neptune](neptune.png)

![neptune2](neptune2.png)

Un [ejemplo](https://twitter.com/omarsar0/status/1309106152106602497?s=20) de visualizaci√≥n de datos con este tipo de base de datos.



# Amazon Timestream
Otro tipo de base de datos que sale de lo com√∫n de las bases de datos relacionales son las bases de datos para series temporales (time series database), se especializan en el almacenamiento y procesamiento de datos con `estampas de tiempo` a altas tasas de ingesti√≥n con optimizaci√≥n para la recuperaci√≥n de informaci√≥n con el par√°metro principal del tiempo.
Las aplicaciones comunes son procesamiento de datos financieros para hacer trading, autos aut√≥nomos con la cantidad de informaci√≥n generada por las c√°maras, radares y sensores. 
Timestream es un servicio PaaS, unos cuantos click bastar√°n para despreocuparse sobre clusters, infraestructura, tipos de storage para tener lista una base de datos funcionando.
Aunque el servicio fue anunciado en el AWS re:Invent 2018 el servicio no esta abierto a todo p√∫blico, no se puede seleccionar en AWS Console, en su lugar habr√° que llenar un formulario que AWS evaluar√° para dar acceso al servicio.
![timestream-preview](timestream-preview.png)




# Amazon Quantum Ledger Database

Amazon QLDB es una base de datos dise√±ada para mantener todo el historial de las transacciones hechas inmutable, el historial de las transacciones no puede ser modificado, eliminado u alterado garantizando la integridad de las transacciones por criptograf√≠a. 
Esta caracter√≠stica hace de QLDB especialmente interesante en aplicaciones del ramo bancario donde debe quedar un registro inalterable y verificable de cada movimiento financiero de las cuentas bancarias.
QLDB no soporta por el momento ning√∫n tipo de restauraci√≥n de datos ni respaldo, solo es posible exportar los datos a un bucket S3, para garantizar la disponibilidad de la informaci√≥n se replica a todas las zonas de disponibilidad de la regi√≥n donde se ejecuta el servicio.
QLDB tiene cifrado por defecto habilitado adem√°s es compatible con conexiones VPC privadas.

Literal en dos click se tiene una instancia ejecut√°ndose. 

![qldb.png](qldb.png)

![qldb-2.png](qldb-2.png)


![qldb-3.png](qldb-3.png)

En la propia consola de QLDB se ejecutan las consultas con el lenguaje [PartiQL](https://partiql.org/faqs.html#what-is-partiql).

![qldb-4](qldb-4.png)


